<!-- event_management/templates/index.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="container mt-5">

    <!-- Introduction Section -->
    <section class="intro my-5">
        <h2>Welcome to Our Event Management System</h2>
        <p>
            Our platform helps you manage your events efficiently. Whether you're organizing a small meetup or a large conference, we provide the tools to make your event successful.
        </p>
    </section>

    <!-- Call-to-Action Section -->
    <section class="cta my-5 text-center">
        <h3>Get Started with EventHorizon</h3>
        <p>Join us today and make your events unforgettable!</p>
        <a href="{% url 'register' %}" class="btn btn-primary">Sign Up Now</a>
    </section>

    <!-- Carousel for Featured Events or Testimonials -->
    <section id="carouselSection" class="my-5">
        <div id="eventCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="d-flex justify-content-center">
                        <div class="card" style="width: 18rem;">
                            <div class="card-body">
                                <h5 class="card-title">Featured Event 1</h5>
                                <p class="card-text">Highlight of event 1.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="d-flex justify-content-center">
                        <div class="card" style="width: 18rem;">
                            <div class="card-body">
                                <h5 class="card-title">Featured Event 2</h5>
                                <p class="card-text">Highlight of event 2.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Add more carousel items as needed -->
            </div>
            <a class="carousel-control-prev" href="#eventCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#eventCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </section>

    <!-- Event Countdown Section -->
    <section class="countdown my-5 text-center">
        <h3>Next Event Starts In:</h3>
        {% if events %}
        <div id="countdown-timer" data-event-date="{{ events.0.date }}"></div>
        {% else %}
        <p>No upcoming events</p>
        {% endif %}
    </section>

    <!-- Event Cards Section -->
    <div class="row mt-4">
        {% for event in events %}
        <div class="col-md-4 mb-4">
            <div class="card event-card">
                <div class="card-body">
                    <h5 class="card-title">{{ event.name }}</h5>
                    <p class="card-text">
                        <strong>Date:</strong> {{ event.date }}<br>
                        <strong>Location:</strong> {{ event.location }}
                    </p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Newsletter Subscription Section -->
<section class="newsletter my-5 text-center">
    <h3>Subscribe to Our Newsletter</h3>
    <form>
        <input type="email" class="form-control" placeholder="Enter your email address">
        <button type="submit" class="btn btn-primary mt-2">Subscribe</button>
    </form>
</section>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Add hover effect to event cards
    const cards = document.querySelectorAll('.event-card');
    cards.forEach(card => {
        card.addEventListener('mouseover', () => {
            card.classList.add('shadow-lg');
        });
        card.addEventListener('mouseout', () => {
            card.classList.remove('shadow-lg');
        });
    });

    // Smooth scroll effect
    const scrollLinks = document.querySelectorAll('a.scroll-link');
    scrollLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            window.scrollTo({
                top: targetElement.offsetTop,
                behavior: 'smooth'
            });
        });
    });

    // Countdown Timer
    const countdownTimer = document.getElementById('countdown-timer');
    if (countdownTimer) {
        const eventDate = new Date(countdownTimer.getAttribute('data-event-date')).getTime();
        const updateCountdown = () => {
            const now = new Date().getTime();
            const distance = eventDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            countdownTimer.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            if (distance < 0) {
                clearInterval(interval);
                countdownTimer.innerHTML = "Event Started";
            }
        };
        const interval = setInterval(updateCountdown, 1000);
    }
});
</script>
{% endblock %}

{% block extra_css %}
<style>
/* Carousel styling */
#carouselSection .card {
    transition: transform 0.5s ease;
}

#carouselSection .card:hover {
    transform: scale(1.05);
}

/* Event card hover effect */
.event-card {
    transition: box-shadow 0.3s ease;
}

.event-card:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Introduction section styling */
.intro {
    text-align: center;
    padding: 20px;
    background-color: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.intro h2 {
    margin-bottom: 20px;
}

.intro p {
    font-size: 1.2em;
}

/* CTA section styling */
.cta {
    background-color: #007bff;
    color: white;
    padding: 30px;
    border-radius: 8px;
}

.cta h3 {
    margin-bottom: 20px;
}

.cta p {
    font-size: 1.1em;
}

.cta .btn {
    margin-top: 10px;
}

/* Countdown section styling */
.countdown {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Newsletter section styling */
.newsletter {
    padding: 20px;
    background-color: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.newsletter h3 {
    margin-bottom: 20px;
}

.newsletter form {
    display: inline-block;
    width: 100%;
    max-width: 500px;
}
</style>
{% endblock %}
